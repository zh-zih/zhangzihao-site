{% load static %}
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Scientific</title>
  
  <link rel="icon" href="{% static 'icons/blackhole.png' %}" type="image/x-icon">
  <link rel="stylesheet" href="{% static 'styles/sci.css' %}">
  <link rel="stylesheet" href="{% static 'styles/fonts.css' %}">
</head>

<body class="page">
  <!-- same nav bar structure as aesthetic -->
  <header class="topnav">
    <nav class="topnav__inner">
      <a class="topnav__link" href="{% url 'home' %}">Home</a>
      <a class="topnav__link" href="{% url 'aes_posts' %}">Aesthetic</a>
      <a class="topnav__link topnav__link--active" href="{% url 'sci_posts' %}">Scientific</a>
    </nav>
  </header>

  <!-- background image layer -->
  <div class="bg" aria-hidden="true"></div>

  <main class="container">
    <h1 class="page-title">Scientific</h1>

    {% for post in posts %}
      <article class="post-card">
        <header class="post-card__header">
          <h2 class="post-card__title">{{ post.title }}</h2>
          {% if post.post_info %}
            <p class="post-card__desc">{{ post.post_info }}</p>
          {% endif %}
          <p class="row__meta">{{ post.display_date|date:"Y-m-d" }}</p>
        </header>

        <section class="post-card__media">
          {% with media=post.media.all %}
            {% if media %}
              {% for m in media %}
                {% if m.type == "image" %}
                  <img class="post-card__img" src="{{ m.file.url }}" alt="{{ post.title }}">
                {% elif m.type == "video" %}
                  <video class="post-card__video" controls>
                    <source src="{{ m.file.url }}">
                  </video>
                {% endif %}
              {% endfor %}
            {% else %}
              <div class="media-fallback">No media</div>
            {% endif %}
          {% endwith %}
        </section>

        {% if post.content %}
          <section class="post-card__content">
            {{ post.content|linebreaks }}
          </section>
        {% endif %}
      </article>
    {% empty %}
      <p class="empty">No posts yet.</p>
    {% endfor %}
  </main>
</body>
</html>
